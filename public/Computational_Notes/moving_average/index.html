<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Christopher R. Dishop">
    <meta name="description" content="Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:
\[\begin{equation} y_t = z_t &#43; z_{t-1} &#43; z_{t-2} \end{equation}\]
where \(y_t\) is the outcome variable that is influenced by noise at this moment (\(z_t\)) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.
The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine.">
    <meta name="keywords" content="blog,developer,personal">

    
      <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Simulating a Moving Average Process"/>
<meta name="twitter:description" content="Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:
\[\begin{equation} y_t = z_t &#43; z_{t-1} &#43; z_{t-2} \end{equation}\]
where \(y_t\) is the outcome variable that is influenced by noise at this moment (\(z_t\)) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.
The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine."/>

    <meta property="og:title" content="Simulating a Moving Average Process" />
<meta property="og:description" content="Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:
\[\begin{equation} y_t = z_t &#43; z_{t-1} &#43; z_{t-2} \end{equation}\]
where \(y_t\) is the outcome variable that is influenced by noise at this moment (\(z_t\)) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.
The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://christopherdishop.netlify.app/computational_notes/moving_average/" />
<meta property="article:published_time" content="2019-01-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-01-29T00:00:00+00:00" />


    
      <base href="http://christopherdishop.netlify.app/computational_notes/moving_average/">
    
    <title>
  Simulating a Moving Average Process · Home
</title>

    
      <link rel="canonical" href="http://christopherdishop.netlify.app/computational_notes/moving_average/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://christopherdishop.netlify.app/css/coder.min.aca465d1e362e89828cbd890adff660455d93a2703dbede119b5859a41672c49.css" integrity="sha256-rKRl0eNi6Jgoy9iQrf9mBFXZOicD2&#43;3hGbWFmkFnLEk=" crossorigin="anonymous" media="screen" />
    

    

    

    

    

    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.72.0" />
  </head>

  
  
  <body class="colorscheme-light"
        onload=" twemoji.parse(document.body); "
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://christopherdishop.netlify.app/">
      Home
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://raw.githubusercontent.com/Cdishop/homepage/master/misc/CV.pdf">CV</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/Computational_Notes/">Computational Notes</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/r_resources/">R Resources</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/rec_reading/">Recommended Reading</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Simulating a Moving Average Process</h1>
    </header>

    


<p>Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:</p>
<p><span class="math display">\[\begin{equation}
y_t = z_t + z_{t-1} + z_{t-2}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(y_t\)</span> is the outcome variable that is influenced by noise at this moment (<span class="math inline">\(z_t\)</span>) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.</p>
<p>The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine.</p>
<pre class="r"><code>set.seed(25)

time &lt;- 200
noise &lt;- rnorm(time)
ma_2 &lt;- NULL
for(i in 3:time){
  
  ma_2[i] &lt;- noise[i] + 0.7*noise[i-1] + 0.2*noise[i-2]
  
}</code></pre>
<p>That simulation results in the following.</p>
<pre class="r"><code>library(tidyverse)
library(ggplot2)
library(ggthemes)

df1 &lt;- data.frame(
  &#39;time&#39; = c(1:time),
  &#39;y&#39; = c(ma_2)
)

ggplot(df1, aes(x = time, y = y)) + 
  geom_point() + 
  geom_line() + 
  theme_wsj()</code></pre>
<p><img src="http://christopherdishop.netlify.app/Computational_Notes/moving_average_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The second way to simulate it is to generate noise within the loop itself, store the noise, and then apply it to the outcome across time.</p>
<pre class="r"><code>set.seed(15)

yt &lt;- numeric(time)
zs &lt;- numeric(time)

for(i in 1:time){
  
  if(i == 1){
    
    zs[i] &lt;- rnorm(1,0,1)
    yt[i] &lt;- zs[i]
  
  }else if(i == 2){
    
    zs[i] &lt;- rnorm(1,0,1) 
    yt[i] &lt;- zs[i] + 0.7*zs[i-1]
    
    }else{
  
    zs[i] &lt;- rnorm(1,0,1)
    yt[i] &lt;- zs[i] + 0.7*zs[i-1] + 0.2*zs[i-2]
  
    }
  
}</code></pre>
<p>Here is the plot.</p>
<pre class="r"><code>df2 &lt;- data.frame(
  &#39;time&#39; = c(1:time),
  &#39;y&#39; = c(yt)
)

ggplot(df2, aes(x = time, y = yt)) + 
  geom_point() + 
  geom_line() + 
  theme_wsj()</code></pre>
<p><img src="http://christopherdishop.netlify.app/Computational_Notes/moving_average_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>The second simulation style takes more code but I find it more intuitive. It is difficult for me to wrap my head around simulating all of the noise first and then applying it to the process as if the two are independent components – which is what the first simulation code mimics. To each their own.</p>
<p>Bo<span class="math inline">\(^2\)</span>m =)</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2016 -
        
        2020
         Christopher R. Dishop 
      
      
         · 
        Generated with <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      


      

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    
    </section>
  </footer>


    </main>

    

    

    <script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '//analytics.example.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'ABCDE');
fathom('trackPageview');
</script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/atom-one-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>


  </body>



</html>
