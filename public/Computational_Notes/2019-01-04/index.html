<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="-----">

  
  <link rel="alternate" hreflang="en-us" href="https://christopherdishop.netlify.app/computational_notes/2019-01-04/">

  


  
  
  
  <meta name="theme-color" content="#06805E">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/tomorrow.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/tomorrow.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i%7CKarla:400,400i,700,700i%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99209585-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-99209585-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hua7ddb50eead73fc737c5c3187aff8cf9_17132_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hua7ddb50eead73fc737c5c3187aff8cf9_17132_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://christopherdishop.netlify.app/computational_notes/2019-01-04/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@apreshill">
  <meta property="twitter:creator" content="@apreshill">
  
  <meta property="og:site_name" content="Christopher R. Dishop">
  <meta property="og:url" content="https://christopherdishop.netlify.app/computational_notes/2019-01-04/">
  <meta property="og:title" content="Frequentist Confidence Intervals | Christopher R. Dishop">
  <meta property="og:description" content="-----"><meta property="og:image" content="https://christopherdishop.netlify.app/img/pom-card.png">
  <meta property="twitter:image" content="https://christopherdishop.netlify.app/img/pom-card.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-01-04T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-01-04T00:00:00&#43;00:00">
  

  



  


  


  





  <title>Frequentist Confidence Intervals | Christopher R. Dishop</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Christopher R. Dishop</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://raw.githubusercontent.com/Cdishop/website/master/misc/CV.pdf" target="_blank" rel="noopener"><span>CV</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/computational_notes"><span>Computation</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/r_resources"><span>R Resources</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/rec_reading"><span>Recommended</span></a>
        </li>

        
        

      

        

        

        

        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Frequentist Confidence Intervals</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Jan 4, 2019
  </span>
  

  

  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      


<div id="purpose" class="section level3">
<h3>Purpose</h3>
<p>Imagine that you are interested in the relationship between stress and performance. To assess it, you observe 600 people at work and measure their stress via a self-report (e.g., “I feel stressed”) and their performance via objective performance scores for the day (e.g., number of sales). You regress performance on stress and find that the estimated coefficient relating to two is 0.45. You then build a 95% confidence interval using the standard error that the analysis spit out and find that the CI is 0.45 +- 0.1.</p>
<p>What does that confidence interval actually mean? The purpose of this exercise is to build intuition behind frequentist CIs.</p>
</div>
<div id="steps" class="section level3">
<h3>Steps</h3>
<ol style="list-style-type: decimal">
<li><p>Generate the population</p></li>
<li><p>Sample the population. On that sample…</p>
<p>2a) Regress performance on stress</p>
<p>2b) Calculate a CI</p>
<p>2c) Does the CI contain the population parameter?</p></li>
<li><p>Re-sample and repeat</p></li>
</ol>
</div>
<div id="generate-the-population" class="section level3">
<h3>1) Generate the population</h3>
<p>Our population will contain 100,000 people</p>
<pre class="r"><code>pop_number &lt;- 100000</code></pre>
<p>with stress scores distributed about zero. The scale here doesn’t matter – we care about the relationship between stress and performance and less about (in this example) the distributions of stress and performance themselves.</p>
<pre class="r"><code>population_stress &lt;- rnorm(pop_number, 0, 5)</code></pre>
<p>The true relationship between stress and performance will be 0.45. Let’s set that parameter</p>
<pre class="r"><code>stress_performance_coefficient &lt;- 0.45</code></pre>
<p>and then generate performance.</p>
<pre class="r"><code>population_performance &lt;- stress_performance_coefficient*population_stress + rnorm(pop_number, 0, 1)</code></pre>
<p>Now plug everything into a data set. Remember, this is the population.</p>
<pre class="r"><code>df &lt;- data.frame(
  &#39;person&#39; = c(1:pop_number),
  &#39;stress&#39; = c(population_stress),
  &#39;performance&#39; = c(population_performance)
)</code></pre>
<p>What is the paramter relating stress to performance? 0.45, keep that in mind. Time to sample the population as if we conducted a study and run our regression.</p>
</div>
<div id="sample-the-population" class="section level3">
<h3>2) Sample the population</h3>
<p>Randomly select 600 people from our population. That is, pretend we ran a study on 600 subjects.</p>
<pre class="r"><code>sample_size &lt;- 600
random_numbers &lt;- sample(c(1:pop_number), sample_size)

sample_df &lt;- df %&gt;%
  filter(person %in% random_numbers)</code></pre>
</div>
<div id="a-regress-performance-on-stress" class="section level3">
<h3>2a) Regress Performance on Stress</h3>
<p>Use the <code>lm</code> command for regression in <code>R</code>.</p>
<pre class="r"><code>summary(lm(performance ~ stress,
           data = sample_df))</code></pre>
<pre><code>## 
## Call:
## lm(formula = performance ~ stress, data = sample_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.9074 -0.6286  0.0214  0.6240  4.2557 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.050081   0.040098  -1.249    0.212    
## stress       0.453671   0.007692  58.976   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9822 on 598 degrees of freedom
## Multiple R-squared:  0.8533, Adjusted R-squared:  0.853 
## F-statistic:  3478 on 1 and 598 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="b-compute-the-ci" class="section level3">
<h3>2b) Compute the CI</h3>
<p>Save the output of the regression in an object so we can pull out the specific coefficients that we are interested in.</p>
<pre class="r"><code>output &lt;- summary(lm(performance ~ stress,
                  data = sample_df))</code></pre>
<p>Pull out the coefficient relating stress to performance</p>
<pre class="r"><code>slope_coefficient &lt;- output$coefficients[2,1]</code></pre>
<p>and use it along with the SEs to calculate the confidence interval.</p>
<pre class="r"><code>se_upper &lt;- slope_coefficient + 1.96*output$coefficients[2,2]
se_lower &lt;- slope_coefficient - 1.96*output$coefficients[2,2]</code></pre>
</div>
<div id="c-does-the-ci-contain-the-population-parameter" class="section level3">
<h3>2c) Does the CI contain the population parameter?</h3>
<p>Remember that the parameter is 0.45.</p>
<pre class="r"><code>contain_parameter &lt;- NULL

if(se_lower &lt;= stress_performance_coefficient &amp;&amp; se_upper &gt;= stress_performance_coefficient){
  contain_parameter &lt;- &#39;yes&#39;
}else{
  contain_parameter &lt;- &#39;no&#39;
}

contain_parameter</code></pre>
<pre><code>## [1] &quot;yes&quot;</code></pre>
<p>What did we do? We sampled the population, ran a regression to relate stress to performance, and then calculated a CI on the slope term. The interpretation of a CI, however, is across infinite samples. Now we need to run through the sample, regress, and calculate CI procedure again and again and again – Monte Carlo.</p>
</div>
<div id="re-sample-and-repeat" class="section level3">
<h3>3) Re sample and repeat</h3>
<p>I created a function that samples the population, runs a regression, calculates the CI, and then saves whether or not the interval contained 0.45 (‘yes’ or ‘no’). You can view that code in the raw rmarkdown file. For now, just know that the function is called <code>sample_regress_calc_ci</code>.</p>
<p>We are going to re-run step 2 from above 900 times</p>
<pre class="r"><code>sims &lt;- 900</code></pre>
<p>and store the ‘yes’ or ‘no’ result in a vector.</p>
<pre class="r"><code>all_ci_contains &lt;- numeric(sims)</code></pre>
<p>Here is the full Monte Carlo code.</p>
<pre class="r"><code>sims &lt;- 900
all_ci_contains &lt;- numeric(sims)

for(i in 1:sims){
  
  result &lt;- sample_regress_calc_ci()
  all_ci_contains[i] &lt;- result
  
}</code></pre>
</div>
<div id="interpretation" class="section level3">
<h3>Interpretation</h3>
<p>How many computed intervals contain the population parameter?</p>
<pre class="r"><code>sum(all_ci_contains == &#39;yes&#39;) / sims</code></pre>
<pre><code>## [1] 0.94</code></pre>
</div>

    </div>

    
































  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    

    
    

    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.6f7ce8be710290b8c431bbc97f405d15.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">


  <p class="powered-by">
    © Christopher Dishop 2020 &middot; 

    Made with <a href="https://cran.r-project.org/" target="_blank" rel="noopener"><i class="fab fa-r-project"></i> </a><a href="https://github.com/rstudio/blogdown" target="_blank" rel="noopener">blogdown</a>,
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>, and
    <a href="https://github.com/rbind/apreshill" target="_blank" rel="noopener">Alison's Hill's</a> wonderful template.

    

    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
