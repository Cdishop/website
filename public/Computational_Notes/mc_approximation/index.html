<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Christopher R. Dishop">
    <meta name="description" content="Monte Carlo helps us understand processes that we can describe but don’t yet have analytic solutions for. Here are two examples: the birthday problem and the tasting tea problem.
Birthday Problem If you are standing in a room with 25 other people, what is the probability that at least two people share the same birthday? This question has a mathematical solution, but if we don’t know it we can use Monte Carlo to help.">
    <meta name="keywords" content="blog,developer,personal">

    
      <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Monte Carlo Approximation"/>
<meta name="twitter:description" content="Monte Carlo helps us understand processes that we can describe but don’t yet have analytic solutions for. Here are two examples: the birthday problem and the tasting tea problem.
Birthday Problem If you are standing in a room with 25 other people, what is the probability that at least two people share the same birthday? This question has a mathematical solution, but if we don’t know it we can use Monte Carlo to help."/>

    <meta property="og:title" content="Monte Carlo Approximation" />
<meta property="og:description" content="Monte Carlo helps us understand processes that we can describe but don’t yet have analytic solutions for. Here are two examples: the birthday problem and the tasting tea problem.
Birthday Problem If you are standing in a room with 25 other people, what is the probability that at least two people share the same birthday? This question has a mathematical solution, but if we don’t know it we can use Monte Carlo to help." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://christopherdishop.netlify.app/computational_notes/mc_approximation/" />
<meta property="article:published_time" content="2018-08-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-08-12T00:00:00+00:00" />


    
      <base href="http://christopherdishop.netlify.app/computational_notes/mc_approximation/">
    
    <title>
  Monte Carlo Approximation · Home
</title>

    
      <link rel="canonical" href="http://christopherdishop.netlify.app/computational_notes/mc_approximation/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://christopherdishop.netlify.app/css/coder.min.aca465d1e362e89828cbd890adff660455d93a2703dbede119b5859a41672c49.css" integrity="sha256-rKRl0eNi6Jgoy9iQrf9mBFXZOicD2&#43;3hGbWFmkFnLEk=" crossorigin="anonymous" media="screen" />
    

    

    

    

    

    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.72.0" />
  </head>

  
  
  <body class="colorscheme-light"
        onload=" twemoji.parse(document.body); "
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://christopherdishop.netlify.app/">
      Home
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://raw.githubusercontent.com/Cdishop/homepage/master/misc/CV.pdf">CV</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/Computational_Notes/">Computational Notes</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/r_resources/">R Resources</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/rec_reading/">Recommended Reading</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Monte Carlo Approximation</h1>
    </header>

    


<p>Monte Carlo helps us understand processes that we can describe but don’t yet have analytic solutions for. Here are two examples: the birthday problem and the tasting tea problem.</p>
<div id="birthday-problem" class="section level1">
<h1>Birthday Problem</h1>
<p>If you are standing in a room with 25 other people, what is the probability that at least two people share the same birthday? This question has a mathematical solution, but if we don’t know it we can use Monte Carlo to help.</p>
<p>Select 25 people with random birthdays</p>
<pre class="r"><code>group_birthdays &lt;- sample(1:365, 15, replace = TRUE)</code></pre>
<p>and then check whether two of them share a birthday.</p>
<pre class="r"><code>shared_birthday &lt;- length(group_birthdays[duplicated(group_birthdays)])

# Returns 1 if yes and 0 if no</code></pre>
<p>Now place everything into a loop and evaluate 5000 times for the final Monte Carlo:</p>
<pre class="r"><code>group_size &lt;- 15
iterations &lt;- 5000
shared_birthdays_counter &lt;- 0

for(i in 1:iterations){
  
  
  group_birthdays &lt;- sample(1:365, 15, replace = TRUE)
  
  shared_birthday &lt;- length(group_birthdays[duplicated(group_birthdays)])
  
  if(shared_birthday == 1){
    
    shared_birthdays_counter &lt;- shared_birthdays_counter + 1
  }
  
  
  
}</code></pre>
<p>The probability of a shared birthday among a group of 15 is…</p>
<pre class="r"><code>shared_birthdays_counter / iterations</code></pre>
<pre><code>## [1] 0.2326</code></pre>
<p>The probability of a shared birthday as we increase group size…</p>
<pre class="r"><code>sizes &lt;- 2:25
prob_store &lt;- numeric(length(sizes))

for(j in 1:24){
  
  


group_size &lt;- j
iterations &lt;- 5000
shared_birthdays_counter &lt;- 0

for(i in 1:iterations){
  
  
  group_birthdays &lt;- sample(1:365, group_size, replace = TRUE)
  
  shared_birthday &lt;- length(group_birthdays[duplicated(group_birthdays)])
  
  if(shared_birthday == 1){
    
    shared_birthdays_counter &lt;- shared_birthdays_counter + 1
  }
  
  
  
}

prob_store[j] &lt;- shared_birthdays_counter / iterations

}

df &lt;- data.frame(
  &#39;group_size&#39; = c(2:25),
  &#39;probability&#39; = c(prob_store)
)

library(ggplot2)

plot1 &lt;- ggplot(df, aes(x = group_size, y = probability)) + 
  geom_bar(stat = &#39;identity&#39;, color = &#39;orange&#39;)

plot1</code></pre>
<p><img src="http://christopherdishop.netlify.app/Computational_Notes/mc_approximation_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The equation to solve the birthday problem is</p>
<p><span class="math display">\[\begin{equation}
n! / (n - k)!
\end{equation}\]</span></p>
<p>where <span class="math inline">\(n\)</span> is the number of possible birthdays and <span class="math inline">\(k\)</span> is group size. The beauty of Monte Carlo is that we didn’t need the above equation to learn about our shared birthday process.</p>
</div>
<div id="tasting-tea" class="section level1">
<h1>Tasting Tea</h1>
<p>Imagine that I make one cup of tea with milk and then ask you the following: did I pour the tea or milk first? I repeat this for eight cups of tea. What is the probability that you guess correctly for 3 of the cups? For all 8 cups?</p>
<p>First, we generate truth. For each cup, ‘M’ means I poured milk first and ‘T’ means I poured tea first.</p>
<pre class="r"><code>possible_pours &lt;- c(rep(&#39;M&#39;, 4), rep(&#39;T&#39;, 4))
true_pours &lt;- sample(possible_pours, size = 8)

# The true first pours

true_pours</code></pre>
<pre><code>## [1] &quot;M&quot; &quot;T&quot; &quot;M&quot; &quot;M&quot; &quot;T&quot; &quot;M&quot; &quot;T&quot; &quot;T&quot;</code></pre>
<p>Then you make a guess for each cup.</p>
<pre class="r"><code>guess &lt;- c(&#39;M&#39;, &#39;T&#39;, &#39;T&#39;, &#39;M&#39;, &#39;T&#39;, &#39;T&#39;, &#39;M&#39;, &#39;M&#39;)</code></pre>
<p>In this case, you guessed that I poured milk first for cup 1 and tea first for cup 2. How many of your guesses are correct?</p>
<pre class="r"><code>correct &lt;- sum(true_pours == guess)

correct</code></pre>
<pre><code>## [1] 4</code></pre>
<p>Now we can put all of that into a Monte Carlo loop.</p>
<pre class="r"><code>iterations &lt;- 5000
correct_store &lt;- numeric(iterations)

for(i in 1:iterations){
  
  possible_pours &lt;- c(rep(&#39;M&#39;, 4), rep(&#39;T&#39;, 4))
  true_pours &lt;- sample(possible_pours, size = 8)
  
  guess &lt;- c(&#39;M&#39;, &#39;T&#39;, &#39;T&#39;, &#39;M&#39;, &#39;T&#39;, &#39;T&#39;, &#39;M&#39;, &#39;M&#39;)
  
  correct &lt;- sum(true_pours == guess)
  
  correct_store[i] &lt;- correct

  
}</code></pre>
<p>What is the probability of you guessing correctly for 2 cups…6?</p>
<pre class="r"><code>prop.table(table(correct_store))</code></pre>
<pre><code>## correct_store
##      0      2      4      6      8 
## 0.0112 0.2358 0.5096 0.2290 0.0144</code></pre>
<p>Just like the birthday problem, there are equations that govern this “tea problem.” We don’t know what they are, but we can still learn about the process by using Monte Carlo approximation.</p>
<p>These examples can be found with greater discussion in <em>Quantitative Social Science</em> by Kosuke Imai.</p>
<p>Bo<span class="math inline">\(^2\)</span>m =)</p>
</div>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2016 -
        
        2020
         Christopher R. Dishop 
      
      
         · 
        Generated with <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      


      

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    
    </section>
  </footer>


    </main>

    

    

    <script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '//analytics.example.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'ABCDE');
fathom('trackPageview');
</script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/atom-one-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>


  </body>



</html>
