<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta name="generator" content="Hugo 0.48" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simulating a Moving Average Process | Christopher Dishop</title>

     
      
    
    
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="Simulating a Moving Average Process" />
<meta property="og:description" content="Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:
\[\begin{equation} y_t = z_t &#43; z_{t-1} &#43; z_{t-2} \end{equation}\]
where \(y_t\) is the outcome variable that is influenced by noise at this moment (\(z_t\)) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.
The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/computational_notes/moving_average/" /><meta property="article:published_time" content="2019-01-29T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-01-29T00:00:00&#43;00:00"/> 
    



 
    
     
     
    
    
    <link rel="canonical" href="/computational_notes/moving_average/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/flatly/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="navbar is-transparent">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/img/bulma.png" alt="Bulma logo">
    </a>
  </div>
  
    
    
    
    <span class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
    </span>
    
    
    
    <div class="navbar-end">
      <div class="navbar-item">
        
        
          <a itemprop="url" class="navbar-item " href="https://github.com/Cdishop/website/raw/master/misc/CV.pdf"><span itemprop="name">CV</span></a>
        
          <a itemprop="url" class="navbar-item " href="/rec_reading/"><span itemprop="name">Recommended Reading</span></a>
        
          <a itemprop="url" class="navbar-item " href="/r_resources/"><span itemprop="name">R Resources</span></a>
        
          <a itemprop="url" class="navbar-item  is-active" href="/computational_notes/"><span itemprop="name">Computational_Notes</span></a>
        
      </div> 
    </div>
  </div>
</nav>
 </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="content container">
                   <p>Two ways to simulate a moving average process. A moving average is a linear combination of concurrent and historic noises:</p>
<p><span class="math display">\[\begin{equation}
y_t = z_t + z_{t-1} + z_{t-2}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(y_t\)</span> is the outcome variable that is influenced by noise at this moment (<span class="math inline">\(z_t\)</span>) and noise from the last two time points. MA(q) processes can occur at any lag, I will use a two lag version here.</p>
<p>The first way to simulate this process is to generate all noise terms and then sample from that distribution throughout our recursive routine.</p>
<pre class="r"><code>set.seed(25)

time &lt;- 200
noise &lt;- rnorm(time)
ma_2 &lt;- NULL
for(i in 3:time){
  
  ma_2[i] &lt;- noise[i] + 0.7*noise[i-1] + 0.2*noise[i-2]
  
}</code></pre>
<p>That simulation results in the following.</p>
<pre class="r"><code>library(tidyverse)
library(ggplot2)

df1 &lt;- data.frame(
  &#39;time&#39; = c(1:time),
  &#39;y&#39; = c(ma_2)
)

ggplot(df1, aes(x = time, y = y)) + 
  geom_point() + 
  geom_line()</code></pre>
<p><img src="/Computational_Notes/moving_average_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The second way to simulate it is to generate noise within the loop itself, store the noise, and then apply it to the outcome across time.</p>
<pre class="r"><code>set.seed(15)

yt &lt;- numeric(time)
zs &lt;- numeric(time)

for(i in 1:time){
  
  if(i == 1){
    
    zs[i] &lt;- rnorm(1,0,1)
    yt[i] &lt;- zs[i]
  
  }else if(i == 2){
    
    zs[i] &lt;- rnorm(1,0,1) 
    yt[i] &lt;- zs[i] + 0.7*zs[i-1]
    
    }else{
  
    zs[i] &lt;- rnorm(1,0,1)
    yt[i] &lt;- zs[i] + 0.7*zs[i-1] + 0.2*zs[i-2]
  
    }
  
}</code></pre>
<p>Here is the plot.</p>
<pre class="r"><code>df2 &lt;- data.frame(
  &#39;time&#39; = c(1:time),
  &#39;y&#39; = c(yt)
)

ggplot(df2, aes(x = time, y = yt)) + 
  geom_point() + 
  geom_line()</code></pre>
<p><img src="/Computational_Notes/moving_average_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>The second simulation style takes more code but I find it more intuitive. It is difficult for me to wrap my head around simulating all of the noise first and then applying it to the process as if the two are independent components â€“ which is what the first simulation code mimics. To each their own.</p>
<p>Bo<span class="math inline">\(^2\)</span>m =)</p>

                </div>
                <br>
            </div>
        </section>
    </div>
</div>
</main>
    <footer> 
  <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                I generated this site using 
                <a href="https://gohugo.io/">Hugo</a> and Jeblister's
                <a href="https://themes.gohugo.io/bulma/">Bulma</a> theme.
                
            </p>
            <p>
              Michigan State University is not liable for any opinions on this website.

            </p>
        </div>
    </div>
</footer>

<script src="//yihui.name/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<link rel="stylesheet" href="/css/obsidian.css" rel="stylesheet" id="theme-stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 
</footer>

    <script async type="text/javascript" src="/js/bulma.js"></script>
    <script async type="text/javascript"  src="/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="/js/clip.js"></script>
</body>

</html>