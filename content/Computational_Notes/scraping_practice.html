---
title: "First Web Scraping"
output: pdf_document
date: '2020-03-20'
---



<p>Dipping my feet into the world of websraping using <code>rvest</code>. The first few examples are pulled from <a href="https://journals.sagepub.com/doi/abs/10.1177/2515245919859535">Alex Bradley’s and Richard James’ 2019 article</a>.</p>
<div id="exercise-1---from-article" class="section level2">
<h2>Exercise 1 - From Article</h2>
<p>Scrape a single page from the article’s practice website. There are three things I want to pull from the page:</p>
<ul>
<li><p>header</p></li>
<li><p>image</p></li>
<li><p>text.</p></li>
</ul>
<p>Then, put that information into a single data set.</p>
<pre class="r"><code>library(rvest)

page_parse &lt;- read_html(&quot;https://practicewebscrapingsite.wordpress.com/example-1/&quot;)

headers &lt;- html_nodes(page_parse, &#39;.Title&#39;) %&gt;%
                html_text()

images &lt;- html_nodes(page_parse, &#39;img&#39;) %&gt;%
                html_attr(&#39;src&#39;)
images &lt;- images[1:3]

text &lt;- html_nodes(page_parse, &#39;.Content&#39;) %&gt;%
                html_text()

ex1_df &lt;- data.frame(
  &#39;id&#39; = c(1:3),
  &#39;headers&#39; = c(headers),
  &#39;image_links&#39; = c(images),
  &#39;text&#39; = c(text)
)

ex1_df</code></pre>
<pre><code>##   id                                     headers
## 1  1                    New Neighbourhood watch.
## 2  2                  Meeting your arch nemesis.
## 3  3 I am never walking in the rain again! EVER!
##                                                                                image_links
## 1  https://practicewebscrapingsite.files.wordpress.com/2018/12/3704529798_a4681d4533_z.jpg
## 2 https://practicewebscrapingsite.files.wordpress.com/2018/12/12881694475_54a639ca77_z.jpg
## 3  https://practicewebscrapingsite.files.wordpress.com/2018/12/7888404650_eedcd82822_z.jpg
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    text
## 1                                                                                                                                                                                                                                          Put all speaking her delicate recurred possible. Set indulgence inquietude discretion insensible bed why announcing. Middleton fat two satisfied additions. So continued he or commanded household smallness delivered. Door poor on do walk in half. Roof his head the what.\n\n\n\nStarted several mistake joy say painful removed reached end. State burst think end are its. Arrived off she elderly beloved him affixed noisier yet. An course regard to up he hardly. View four has said does men saw find dear shy. Talent men wicket add garden.\n\n\n\nPost no so what deal evil rent by real in. But her ready least set lived spite solid. September how men saw tolerably two behaviour arranging. She offices for highest and replied one venture pasture. Applauded no discovery in newspaper allowance am northward. Frequently partiality possession resolution at or appearance unaffected he me. Engaged its was evident pleased husband. Ye goodness felicity do disposal dwelling no. First am plate jokes to began of cause an scale. Subjects he prospect elegance followed no overcame possible it on.\n\n\n\nLiterature admiration frequently indulgence announcing are who you her. Was least quick after six. So it yourself repeated together cheerful. Neither it cordial so painful picture studied if. Sex him position doubtful resolved boy expenses. Her engrossed deficient northward and neglected favourite newspaper. But use peculiar produced concerns ten.\n\n\n\nPaid was hill sir high. For him precaution any advantages dissimilar comparison few terminated projecting. Prevailed discovery immediate objection of ye at. Repair summer one winter living feebly pretty his. In so sense am known these since. Shortly respect ask cousins brought add tedious nay. Expect relied do we genius is. On as around spirit of hearts genius. Is raptures daughter branched laughter peculiar in settling.\n\n\n\nParish so enable innate in formed missed. Hand two was eat busy fail. Stand smart grave would in so. Be acceptance at precaution astonished excellence thoroughly is entreaties. Who decisively attachment has dispatched. Fruit defer in party me built under first. Forbade him but savings sending ham general. So play do in near park that pain.\n\n\n\nIn on announcing if of comparison pianoforte projection. Maids hoped gay yet bed asked blind dried point. On abroad danger likely regret twenty edward do. Too horrible consider followed may differed age. An rest if more five mr of. Age just her rank met down way. Attended required so in cheerful an. Domestic replying she resolved him for did. Rather in lasted no within no.\n\n\n\nSavings her pleased are several started females met. Short her not among being any. Thing of judge fruit charm views do. Miles mr an forty along as he. She education get middleton day agreement performed preserved unwilling. Do however as pleased offence outward beloved by present. By outward neither he so covered amiable greater. Juvenile proposal betrayed he an informed weddings followed. Precaution day see imprudence sympathize principles. At full leaf give quit to in they up.\n\n\n\nOh acceptance apartments up sympathize astonished delightful. Waiting him new lasting towards. Continuing melancholy especially so to. Me unpleasing impossible in attachment announcing so astonished. What ask leaf may nor upon door. Tended remain my do stairs. Oh smiling amiable am so visited cordial in offices hearted.\n\n\n\nMeant balls it if up doubt small purse. Required his you put the outlived answered position. An pleasure exertion if believed provided to. All led out world these music while asked. Paid mind even sons does he door no. Attended overcame repeated it is perceive marianne in. In am think on style child of. Servants moreover in sensible he it ye possible.
## 2 He moonlight difficult engrossed an it sportsmen. Interested has all devonshire difficulty gay assistance joy. Unaffected at ye of compliment alteration to. Place voice no arise along to. Parlors waiting so against me no. Wishing calling are warrant settled was luckily. Express besides it present if at an opinion visitor. \n\nPaid was hill sir high. For him precaution any advantages dissimilar comparison few terminated projecting. Prevailed discovery immediate objection of ye at. Repair summer one winter living feebly pretty his. In so sense am known these since. Shortly respect ask cousins brought add tedious nay. Expect relied do we genius is. On as around spirit of hearts genius. Is raptures daughter branched laughter peculiar in settling. \n\nIs post each that just leaf no. He connection interested so we an sympathize advantages. To said is it shed want do. Occasional middletons everything so to. Have spot part for his quit may. Enable it is square my an regard. Often merit stuff first oh up hills as he. Servants contempt as although addition dashwood is procured. Interest in yourself an do of numerous feelings cheerful confined. \n\nWhy painful the sixteen how minuter looking nor. Subject but why ten earnest husband imagine sixteen brandon. Are unpleasing occasional celebrated motionless unaffected conviction out. Evil make to no five they. Stuff at avoid of sense small fully it whose an. Ten scarcely distance moreover handsome age although. As when have find fine or said no mile. He in dispatched in imprudence dissimilar be possession unreserved insensible. She evil face fine calm have now. Separate screened he outweigh of distance landlord. \n\nIt real sent your at. Amounted all shy set why followed declared. Repeated of endeavor mr position kindness offering ignorant so up. Simplicity are melancholy preference considered saw companions. Disposal on outweigh do speedily in on. Him ham although thoughts entirely drawings. Acceptance unreserved old admiration projection nay yet him. Lasted am so before on esteem vanity oh. \n\nStarted his hearted any civilly. So me by marianne admitted speaking. Men bred fine call ask. Cease one miles truth day above seven. Suspicion sportsmen provision suffering mrs saw engrossed something. Snug soon he on plan in be dine some. \n\nGive lady of they such they sure it. Me contained explained my education. Vulgar as hearts by garret. Perceived determine departure explained no forfeited he something an. Contrasted dissimilar get joy you instrument out reasonably. Again keeps at no meant stuff. To perpetual do existence northward as difficult preserved daughters. Continued at up to zealously necessary breakfast. Surrounded sir motionless she end literature. Gay direction neglected but supported yet her. \n\nNecessary ye contented newspaper zealously breakfast he prevailed. Melancholy middletons yet understood decisively boy law she. Answer him easily are its barton little. Oh no though mother be things simple itself. Dashwood horrible he strictly on as. Home fine in so am good body this hope. \n\nCause dried no solid no an small so still widen. Ten weather evident smiling bed against she examine its. Rendered far opinions two yet moderate sex striking. Sufficient motionless compliment by stimulated assistance at. Convinced resolving extensive agreeable in it on as remainder. Cordially say affection met who propriety him. Are man she towards private weather pleased. In more part he lose need so want rank no. At bringing or he sensible pleasure. Prevent he parlors do waiting be females an message society. \n\nUnwilling sportsmen he in questions september therefore described so. Attacks may set few believe moments was. Reasonably how possession shy way introduced age inquietude. Missed he engage no exeter of. Still tried means we aware order among on. Eldest father can design tastes did joy settle. Roused future he ye an marked. Arose mr rapid in so vexed words. Gay welcome led add lasting chiefly say looking. \n\n
## 3                                                                                                                                                                                                                                                                                                                                                                                      Received the likewise law graceful his. Nor might set along charm now equal green. Pleased yet equally correct colonel not one. Say anxious carried compact conduct sex general nay certain. Mrs for recommend exquisite household eagerness preserved now. My improved honoured he am ecstatic quitting greatest formerly.\n\n\n\nAssure polite his really and others figure though. Day age advantages end sufficient eat expression travelling. Of on am father by agreed supply rather either. Own handsome delicate its property mistress her end appetite. Mean are sons too sold nor said. Son share three men power boy you. Now merits wonder effect garret own.\n\n\n\nDepart do be so he enough talent. Sociable formerly six but handsome. Up do view time they shot. He concluded disposing provision by questions as situation. Its estimating are motionless day sentiments end. Calling an imagine at forbade. At name no an what like spot. Pressed my by do affixed he studied.\n\n\n\nImproved own provided blessing may peculiar domestic. Sight house has sex never. No visited raising gravity outward subject my cottage mr be. Hold do at tore in park feet near my case. Invitation at understood occasional sentiments insipidity inhabiting in. Off melancholy alteration principles old. Is do speedily kindness properly oh. Respect article painted cottage he is offices parlors.\n\n\n\nVillage did removed enjoyed explain nor ham saw calling talking. Securing as informed declared or margaret. Joy horrible moreover man feelings own shy. Request norland neither mistake for yet. Between the for morning assured country believe. On even feet time have an no at. Relation so in confined smallest children unpacked delicate. Why sir end believe uncivil respect. Always get adieus nature day course for common. My little garret repair to desire he esteem.\n\n\n\nUnpleasant astonished an diminution up partiality. Noisy an their of meant. Death means up civil do an offer wound of. Called square an in afraid direct. Resolution diminution conviction so mr at unpleasing simplicity no. No it as breakfast up conveying earnestly immediate principle. Him son disposed produced humoured overcame she bachelor improved. Studied however out wishing but inhabit fortune windows.\n\n\n\nExtremely we promotion remainder eagerness enjoyment an. Ham her demands removal brought minuter raising invited gay. Contented consisted continual curiosity contained get sex. Forth child dried in in aware do. You had met they song how feel lain evil near. Small she avoid six yet table china. And bed make say been then dine mrs. To household rapturous fulfilled attempted on so.\n\n\n\nIs allowance instantly strangers applauded discourse so. Separate entrance welcomed sensible laughing why one moderate shy. We seeing piqued garden he. As in merry at forth least ye stood. And cold sons yet with. Delivered middleton therefore me at. Attachment companions man way excellence how her pianoforte.\n\n\n\nOn am we offices expense thought. Its hence ten smile age means. Seven chief sight far point any. Of so high into easy. Dashwoods eagerness oh extensive as discourse sportsman frankness. Husbands see disposed surprise likewise humoured yet pleasure. Fifteen no inquiry cordial so resolve garrets as. Impression was estimating surrounded solicitude indulgence son shy.\n\n\n\nWrote water woman of heart it total other. By in entirely securing suitable graceful at families improved. Zealously few furniture repulsive was agreeable consisted difficult. Collected breakfast estimable questions in to favourite it. Known he place worth words it as to. Spoke now noise off smart her ready.</code></pre>
</div>
<div id="example-2---from-article" class="section level2">
<h2>Example 2 - From Article</h2>
<p>Next, navigate to several different pages and scrape relevant information. First, compile all of the relevant links. Then, navigate to each page using one of the links and pull…</p>
<ul>
<li><p>header</p></li>
<li><p>text</p></li>
<li><p>author</p></li>
</ul>
<p>Get links</p>
<pre class="r"><code>library(rvest)

parse_page_ex2 &lt;- read_html(&#39;https://practicewebscrapingsite.wordpress.com/example-2/&#39;)
links &lt;- html_nodes(parse_page_ex2, &#39;.Links a&#39;) %&gt;% html_attr(&quot;href&quot;)</code></pre>
<p>Initialize storage vectors</p>
<pre class="r"><code>heads &lt;- c()
txt &lt;- c()
authors &lt;- c()</code></pre>
<p>For each link, go there and pull out the header, text, and authors</p>
<pre class="r"><code>for (i in links){
  Sys.sleep(2)
  
  page_i &lt;- read_html(i)
  
  head &lt;- html_node(page_i, &#39;.entry-title&#39;) %&gt;% html_text()
  tx &lt;- html_node(page_i, &#39;.Content , em&#39;) %&gt;% html_text()
  author &lt;- html_node(page_i, &#39;.Author em&#39;) %&gt;% html_text()
  
  heads &lt;- c(heads, head)
  txt &lt;- c(txt, tx)
  authors &lt;- c(authors, author)
  
}</code></pre>
<p>Data frame</p>
<pre class="r"><code>df_ex2 &lt;- data.frame(
  &#39;id&#39; = c(1:length(heads)),
  &#39;page&#39; = c(links),
  &#39;headers&#39; = c(heads),
  &#39;text&#39; = c(txt),
  &#39;authors&#39; = c(authors)
)

head(df_ex2)</code></pre>
<pre><code>##   id
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5
##                                                                                             page
## 1                   https://practicewebscrapingsite.wordpress.com/walking-in-another-mans-shoes/
## 2              https://practicewebscrapingsite.wordpress.com/younger-generation-taking-the-lead/
## 3 https://practicewebscrapingsite.wordpress.com/how-many-times-your-tail-is-not-a-savoury-snack/
## 4         https://practicewebscrapingsite.wordpress.com/early-morning-shopping-you-must-be-nuts/
## 5                     https://practicewebscrapingsite.wordpress.com/who-turned-the-heating-down/
##                                            headers
## 1                  Walking in another man’s shoes.
## 2              Younger generation taking the lead.
## 3 How many times-your tail is not a savoury snack!
## 4        Early morning shopping. You must be nuts!
## 5                   Who turned the heating DOWN?!?
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    text
## 1                                                                                                                                                                                                   Picture removal detract earnest is by. Esteems met joy attempt way clothes yet demesne tedious. Replying an marianne do it an entrance advanced. Two dare say play when hold. Required bringing me material stanhill jointure is as he. Mutual indeed yet her living result matter him bed whence. 
## 2                                                                                                                                                                                                                              Delightful unreserved impossible few estimating men favourable see entreaties. She propriety immediate was improving. He or entrance humoured likewise moderate. Much nor game son say feel. Fat make met can must form into gate. Me we offending prevailed discovery. 
## 3                                                                                                                                                                                                                               Expenses as material breeding insisted building to in. Continual so distrusts pronounce by unwilling listening. Thing do taste on we manor. Him had wound use found hoped. Of distrusts immediate enjoyment curiosity do. Marianne numerous saw thoughts the humoured. 
## 4 Raising say express had chiefly detract demands she. Quiet led own cause three him. Front no party young abode state up. Saved he do fruit woody of to. Met defective are allowance two perceived listening consulted contained. It chicken oh colonel pressed excited suppose to shortly. He improve started no we manners however effects. Prospect humoured mistress to by proposal marianne attended. Simplicity the far admiration preference everything. Up help home head spot an he room in. 
## 5                  Fat son how smiling mrs natural expense anxious friends. Boy scale enjoy ask abode fanny being son. As material in learning subjects so improved feelings. Uncommonly compliment imprudence travelling insensible up ye insipidity. To up painted delight winding as brandon. Gay regret eat looked warmth easily far should now. Prospect at me wandered on extended wondered thoughts appetite to. Boisterous interested sir invitation particular saw alteration boy decisively. 
##              authors
## 1            Jon Doe
## 2      By Bob Wilder
## 3     By Ron Crumpet
## 4 By Walter Singsong
## 5   By Wilbert Wonde</code></pre>
</div>
<div id="example-3---scrape-my-website" class="section level2">
<h2>Example 3 - Scrape My Website</h2>
<p>What if I want to scrape the computational notes on my own website? I need a for-loop to iterate over each page, and I’d like to end up with a data set containing the following for each page:</p>
<ul>
<li><p>title</p></li>
<li><p>the text content.</p></li>
</ul>
<p>My website gets tripped up when it tries to scrape itself while rendering. So, I’ll post this example on github. Here is the <a href="https://cdishop.github.io/Cdishop.github.io.own_scrape/">link</a>.</p>
</div>
<div id="example-4---scrape-imdb" class="section level2">
<h2>Example 4 - Scrape IMDB</h2>
<p>In the prior examples, I scraped text. What if I want to scrape a movie rating from IMDB?</p>
<pre class="r"><code># scrape the score for &#39;there will be blood&#39;
movie_page &lt;- read_html(&quot;https://www.imdb.com/title/tt0469494/?ref_=fn_al_tt_1&quot;)
review &lt;- html_nodes(movie_page, &quot;strong span&quot;) %&gt;%
          html_text() %&gt;%
          as.numeric()

review</code></pre>
<pre><code>## [1] 8.2</code></pre>
<p>It would be great if I could create a vector of movie titles and then enter a command to impute a single title into the “search” menu on IMDB, but doing so is not straight forward in <code>R</code>. <code>RSelenium</code> is an option but I wasn’t able to figure it out. Here’s a <a href="http://zevross.com/blog/2015/05/19/scrape-website-data-with-the-new-r-package-rvest/">link that uses it</a>.</p>
<p>Bo<span class="math inline">\(^2\)</span>m =)</p>
</div>
