<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Christopher R. Dishop">
    <meta name="description" content="In regression, everything is partialled from everything. Let’s work through that notion with images and code. Imagine that emotion and ability cause an outcome, \(Y\).
What this image represents is that \(Y\) has variability (across people or time), and its variability is associated with variability in emotion and variability in ability. Notice that there is variability overlap between ability and \(Y\),
emotion and \(Y\),
emotion and ability,
and all three variables.">
    <meta name="keywords" content="blog,developer,personal">

    
      <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Everything Partialled From Everything in Regression"/>
<meta name="twitter:description" content="In regression, everything is partialled from everything. Let’s work through that notion with images and code. Imagine that emotion and ability cause an outcome, \(Y\).
What this image represents is that \(Y\) has variability (across people or time), and its variability is associated with variability in emotion and variability in ability. Notice that there is variability overlap between ability and \(Y\),
emotion and \(Y\),
emotion and ability,
and all three variables."/>

    <meta property="og:title" content="Everything Partialled From Everything in Regression" />
<meta property="og:description" content="In regression, everything is partialled from everything. Let’s work through that notion with images and code. Imagine that emotion and ability cause an outcome, \(Y\).
What this image represents is that \(Y\) has variability (across people or time), and its variability is associated with variability in emotion and variability in ability. Notice that there is variability overlap between ability and \(Y\),
emotion and \(Y\),
emotion and ability,
and all three variables." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://christopherdishop.netlify.app/computational_notes/regression_partial/" />
<meta property="article:published_time" content="2019-04-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-04-19T00:00:00+00:00" />


    
      <base href="http://christopherdishop.netlify.app/computational_notes/regression_partial/">
    
    <title>
  Everything Partialled From Everything in Regression · Home
</title>

    
      <link rel="canonical" href="http://christopherdishop.netlify.app/computational_notes/regression_partial/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://christopherdishop.netlify.app/css/coder.min.aca465d1e362e89828cbd890adff660455d93a2703dbede119b5859a41672c49.css" integrity="sha256-rKRl0eNi6Jgoy9iQrf9mBFXZOicD2&#43;3hGbWFmkFnLEk=" crossorigin="anonymous" media="screen" />
    

    

    

    

    

    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://christopherdishop.netlify.app/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.72.0" />
  </head>

  
  
  <body class="colorscheme-light"
        onload=" twemoji.parse(document.body); "
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://christopherdishop.netlify.app/">
      Home
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://raw.githubusercontent.com/Cdishop/homepage/master/misc/CV.pdf">CV</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/Computational_Notes/">Computational Notes</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/r_resources/">R Resources</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://christopherdishop.netlify.app/rec_reading/">Recommended Reading</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Everything Partialled From Everything in Regression</h1>
    </header>

    


<p>In regression, everything is partialled from everything. Let’s work through that notion with images and code. Imagine that emotion and ability cause an outcome, <span class="math inline">\(Y\)</span>.</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/partial_variance.png" width="500" /></p>
<p>What this image represents is that <span class="math inline">\(Y\)</span> has variability (across people or time), and its variability is associated with variability in emotion and variability in ability. Notice that there is variability overlap between ability and <span class="math inline">\(Y\)</span>,</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/here1.png" width="500" /></p>
<p>emotion and <span class="math inline">\(Y\)</span>,</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/here2.png" width="500" /></p>
<p>emotion and ability,</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/here3.png" width="500" /></p>
<p>and all three variables.</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/here4.png" width="500" /></p>
<p>Once we regress <span class="math inline">\(Y\)</span> on emotion and ability, the regression coefficients represent the unique variance components of each predictor</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/partial_coefficients.png" width="500" /></p>
<p>but the technique also removes outcome-relevant variance</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/partial_no_middle.png" width="500" /></p>
<p>and overlapping variance in emotion and ability not related to the outcome.</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/partial_full_partial.png" width="500" /></p>
<p>So, in regression we get coefficients that represent the unique variance contribution of each predictor while partialling overlapping, outcome-relevant variance and overlapping, non-relevant variance. Emotion and ability get to account for their own causal effects of <span class="math inline">\(Y\)</span>, but neither predictor gets the overlapping variance in <span class="math inline">\(Y\)</span>, and the emotion and ability coefficients are adjusted for the emotion-ability overlap situated outside <span class="math inline">\(Y\)</span>.</p>
<p>Let’s do it with code.</p>
<p>Our sample contains 500 people with correlated emotion and ability (<span class="math inline">\(r\)</span> = 0.4).</p>
<pre class="r"><code>people &lt;- 500
emotion &lt;- rnorm(people, 0, 10)
ability &lt;- 0.4*emotion + rnorm(people, 0, 1) # could also do it with MASS</code></pre>
<p>Ability and emotion cause <span class="math inline">\(Y\)</span>.</p>
<pre class="r"><code>error &lt;- rnorm(people, 0, 1)
Y &lt;- 2 + 0.5*ability + 0.38*emotion + error</code></pre>
<p>Regression will recover the parameters.</p>
<pre class="r"><code>df &lt;- data.frame(
  &#39;emotion&#39; = c(emotion),
  &#39;ability&#39; = c(ability),
  &#39;y&#39; = c(Y)
)

summary(lm(y ~ ability + emotion,
           data = df))$coefficients[,1]</code></pre>
<pre><code>## (Intercept)     ability     emotion 
##   1.9449335   0.4845201   0.3891749</code></pre>
<p>Remember, each coefficient is consistent with the “lightning bolt” variance components above. Outcome-relevant overlap is removed and overlap between emotion and ability is removed. Since emotion and ability are partialled from each other, we won’t recover the 0.38 parameter relating emotion to <span class="math inline">\(Y\)</span> if we remove ability from the equation.</p>
<pre class="r"><code>summary(lm(y ~ emotion,
           data = df))$coefficients[,1]</code></pre>
<pre><code>## (Intercept)     emotion 
##   1.9581174   0.5845401</code></pre>
<p>How can we modify our variables to represent the “partialled multiple regression coefficient” for emotion? Naively, it seems that if we remove ability from <span class="math inline">\(Y\)</span> and then regress <span class="math inline">\(Y\)</span> on emotion we will recover the appropriate 0.38 parameter. Let’s try.</p>
<p>Regress <span class="math inline">\(Y\)</span> on just ability</p>
<pre class="r"><code>just_ability &lt;- lm(y ~ ability,
               data = df)</code></pre>
<p>and take the residuals, meaning that in our next regression we will examine the effect of emotion on “leftover <span class="math inline">\(Y\)</span>” – <span class="math inline">\(Y\)</span> with no influence from ability.</p>
<pre class="r"><code>y_with_ability_removed &lt;- resid(just_ability)
df$y_with_ability_removed &lt;- y_with_ability_removed

summary(lm(y_with_ability_removed ~ emotion,
           data = df))$coefficients[,1]</code></pre>
<pre><code>## (Intercept)     emotion 
## 0.002842247 0.021631913</code></pre>
<p>Nope. Why not? Think back to the diagrams, what we just assessed was</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/remove_ability.png" width="500" /></p>
<p>where the estimate accounts for the <span class="math inline">\(Y\)</span>-relevant overlap of emotion and ability, but it is wrong because it doesn’t account for the overlap between emotion and ability situated outside of <span class="math inline">\(Y\)</span>. In regression, everything is partialled from everything…we have not yet accounted for the overlap between emotion and ability in the space not in the <span class="math inline">\(Y\)</span> variance sphere. Now we will.</p>
<p>Partial ability from emotion</p>
<pre class="r"><code>emotion_with_ability_removed &lt;- resid(lm(emotion ~ ability,
                                         data = df))

df$emotion_with_ability_removed &lt;- emotion_with_ability_removed</code></pre>
<p>and now when we regress “Y with ability removed” on “emotion with ability removed” we will recover the 0.38 parameter.</p>
<pre class="r"><code>summary(lm(y_with_ability_removed ~ emotion_with_ability_removed,
           data = df))$coefficients[,1]</code></pre>
<pre><code>##                  (Intercept) emotion_with_ability_removed 
##                 3.876080e-17                 3.891749e-01</code></pre>
<p>In regression, everything is partialled from everything.</p>
<p><img src="https://github.com/Cdishop/homepage/raw/master/content/Computational_Notes/partial_images/partial_full_partial.png" width="500" /></p>
<p>The technique partials overlapping predictor variance both within and outside of the <span class="math inline">\(Y\)</span> space. Neither predictor accounts for overlapping variance within <span class="math inline">\(Y\)</span>, and if an important predictor is excluded then it will artificially account for variance it shouldn’t be capturing.</p>
<p>Note that all of this is relevant for III sums of squares…there are other approaches but III is by far the most common.</p>
<p>Bo<span class="math inline">\(^2\)</span>m =)</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2016 -
        
        2020
         Christopher R. Dishop 
      
      
         · 
        Generated with <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      


      

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    
    </section>
  </footer>


    </main>

    

    

    <script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '//analytics.example.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'ABCDE');
fathom('trackPageview');
</script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/atom-one-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>


  </body>



</html>
